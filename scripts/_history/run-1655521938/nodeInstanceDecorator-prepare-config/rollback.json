{
  "type": "container",
  "subtasks": [
    {
      "type": "container",
      "subtasks": [
        {
          "type": "command",
          "command": "aws --region {aws.region} iam delete-role --role-name {role.name}",
          "name": "Delete role",
          "acceptParameterSubstitutionAdditions": true,
          "skipValidation": false
        }
      ],
      "muteSubtasks": false,
      "name": "Rolling back 'Create role'...",
      "parameters": {
        "execution.id": "tP2p4Duf0a8gsldDIC57w",
        "execution.timestamp": "1655521938",
        "execution.iso8601": "2022-06-18T03:12:18.4070239Z",
        "execution.currentDirectory": "C:\\Sandbox\\cloud\\k8s\\operators\\node-instance-decorator\\scripts",
        "script.path": "C:\\Sandbox\\cloud\\k8s\\operators\\node-instance-decorator\\scripts\\nodeInstanceDecorator-prepare-config.json",
        "script.fileName": "nodeInstanceDecorator-prepare-config.json",
        "_script.fileName": "nodeInstanceDecorator-prepare-config.json",
        "script.fileTitle": "nodeInstanceDecorator-prepare-config",
        "script.directoryPath": "C:\\Sandbox\\cloud\\k8s\\operators\\node-instance-decorator\\scripts",
        "_script.directoryPath": "C:\\Sandbox\\cloud\\k8s\\operators\\node-instance-decorator\\scripts",
        "execution.outputDirectory": "C:\\Sandbox\\cloud\\k8s\\operators\\node-instance-decorator\\scripts\\_history\\run-1655521938\\nodeInstanceDecorator-prepare-config",
        "script.name": "Prepare AWS IAM role and policy for node-instance-decorator",
        "_script.name": "Prepare AWS IAM role and policy for node-instance-decorator",
        "script.version": "0.1.0",
        "script.author": "Kit Huckvale",
        "user.username": "Kit Huckvale",
        "user.domain": "SURFACEBOOK",
        "user.domainUsername": "SURFACEBOOK/Kit Huckvale",
        "user.upn": "Kit Huckvale@SURFACEBOOK",
        "user.machine": "SURFACEBOOK",
        "machine.name": "SURFACEBOOK",
        "generate.shortId": "(Reserved)",
        "generate.uuid": "(Reserved)",
        "k8s.backend": "(Reserved)",
        "k8s.pod": "(Reserved)",
        "user.cidr": "(Reserved)",
        "user.ip": "(Reserved)",
        "user.name": "(Reserved)",
        "utc.date": "(Reserved)",
        "utc.hour": "(Reserved)",
        "utc.iso8601": "(Reserved)",
        "utc.minutes": "(Reserved)",
        "utc.month": "(Reserved)",
        "utc.seconds": "(Reserved)",
        "utc.timestamp": "(Reserved)",
        "utc.weekday": "(Reserved)",
        "utc.year": "(Reserved)",
        "cluster.arn": "arn:aws:eks:ap-southeast-2:446483188693:cluster/tronDev",
        "_localId": "{generate.shortId:5}",
        "correlationTag": "tron/correlationId",
        "correlationId": "ileALhYWS0W9HZLoG92ylw",
        "aws.region": "ap-southeast-2",
        "cluster.name": "tronDev",
        "nodeInstanceDecorator.iam.policy.name": "k8sNodeInstanceDecoratorPolicy",
        "nodeInstanceDecorator.iam.policy.trustPolicyPath": "C:\\Sandbox\\cloud\\k8s\\operators\\node-instance-decorator\\scripts\\_resources\\nodeInstanceDecorator-iam-role-trust-policy.json",
        "nodeInstanceDecorator.iam.serviceRole.nameSuffix": "k8sNodeInstanceDecoratorRole",
        "nodeInstanceDecorator.k8s.namespace": "tron",
        "nodeInstanceDecorator.k8s.serviceAccount.name": "node-instance-decorator",
        "serviceAccount.name": "node-instance-decorator",
        "serviceAccount.namespace": "tron",
        "serviceAccount.iam.policy.name": "k8sNodeInstanceDecoratorPolicy",
        "serviceAccount.iam.policy.trustPolicyPath": "C:\\Sandbox\\cloud\\k8s\\operators\\node-instance-decorator\\scripts\\_resources\\nodeInstanceDecorator-iam-role-trust-policy.json",
        "serviceAccount.iam.serviceRole.nameSuffix": "{nodeInstanceDecorator.iam.serviceRole.nameSuffix}",
        "serviceAccount.iam.serviceRole.description": "Allows the K8s Node Instance Decorator operator to modify EC2 instances.",
        "serviceAccount.skipCreation": "true",
        "_script.fileTitle": "k8s-create-iam-service-account",
        "aws.accountId": "446483188693",
        "serviceAccount.iam.policy.arns": ", arn:aws:iam::446483188693:policy/k8sNodeInstanceDecoratorPolicy",
        "cluster.oidcProvider.url": "https://oidc.eks.ap-southeast-2.amazonaws.com/id/F6E7DA32C18EE4AB10B6D428926E3195",
        "cluster.oidcProvider.id": "F6E7DA32C18EE4AB10B6D428926E3195",
        "serviceAccount.iam.serviceRole.trustedEntitiesPolicyPath": "C:\\Sandbox\\cloud\\k8s\\operators\\node-instance-decorator\\scripts\\_history\\run-1655521938\\nodeInstanceDecorator-prepare-config\\k8sSA-k8sNodeInstanceDecoratorPolicy-mm84p\\iam-trust-policy.json",
        "serviceAccount.manifestPath": "C:\\Sandbox\\cloud\\k8s\\operators\\node-instance-decorator\\scripts\\_history\\run-1655521938\\nodeInstanceDecorator-prepare-config\\k8sSA-{nodeInstanceDecorator.iam.policy.name}-mm84p\\manifest.yaml",
        "serviceAccount.iam.serviceRole.name": "tronDev-k8sNodeInstanceDecoratorRole",
        "serviceAccount.forceCreation": "",
        "serviceAccount.manifestTemplatePath": "{_script.directoryPath}\\_resources\\k8s-service-account.yaml-template",
        "serviceAccount.iam.serviceRole.trustedEntitiesPolicyTemplatePath": "C:\\Sandbox\\cloud\\aws\\scripts\\k8s\\_resources\\iam-role-trusted-entities.template",
        "serviceAccount.kustomize.patchTemplatePath": "{_script.directoryPath}\\_resources\\service-account-patch.yaml-template",
        "serviceAccount.kustomize.patchOutputPath": "{execution.currentDirectory}\\patch.yaml",
        "role.name": "tronDev-k8sNodeInstanceDecoratorRole",
        "role.description": "Generated role. Allows the K8s Node Instance Decorator operator to modify EC2 instances.",
        "role.trustedEntitiesPolicyPath": "C:\\Sandbox\\cloud\\k8s\\operators\\node-instance-decorator\\scripts\\_history\\run-1655521938\\nodeInstanceDecorator-prepare-config\\k8sSA-k8sNodeInstanceDecoratorPolicy-mm84p\\iam-trust-policy.json",
        "role.policyArns": "{serviceAccount.iam.policy.arns}",
        "role.arn": "arn:aws:iam::446483188693:role/tronDev-k8sNodeInstanceDecoratorRole"
      },
      "acceptParameterSubstitutionAdditions": true,
      "skipValidation": false
    },
    {
      "type": "container",
      "subtasks": [
        {
          "type": "command",
          "command": "aws --region {aws.region} iam delete-policy --policy-arn {policy.arn}",
          "name": "Delete policy",
          "acceptParameterSubstitutionAdditions": true,
          "skipValidation": false
        }
      ],
      "muteSubtasks": false,
      "name": "Rolling back 'Create the policy'...",
      "parameters": {
        "execution.id": "tP2p4Duf0a8gsldDIC57w",
        "execution.timestamp": "1655521938",
        "execution.iso8601": "2022-06-18T03:12:18.4070239Z",
        "execution.currentDirectory": "C:\\Sandbox\\cloud\\k8s\\operators\\node-instance-decorator\\scripts",
        "script.path": "C:\\Sandbox\\cloud\\k8s\\operators\\node-instance-decorator\\scripts\\nodeInstanceDecorator-prepare-config.json",
        "script.fileName": "nodeInstanceDecorator-prepare-config.json",
        "_script.fileName": "nodeInstanceDecorator-prepare-config.json",
        "script.fileTitle": "nodeInstanceDecorator-prepare-config",
        "script.directoryPath": "C:\\Sandbox\\cloud\\k8s\\operators\\node-instance-decorator\\scripts",
        "_script.directoryPath": "C:\\Sandbox\\cloud\\k8s\\operators\\node-instance-decorator\\scripts",
        "execution.outputDirectory": "C:\\Sandbox\\cloud\\k8s\\operators\\node-instance-decorator\\scripts\\_history\\run-1655521938\\nodeInstanceDecorator-prepare-config",
        "script.name": "Prepare AWS IAM role and policy for node-instance-decorator",
        "_script.name": "Prepare AWS IAM role and policy for node-instance-decorator",
        "script.version": "0.1.0",
        "script.author": "Kit Huckvale",
        "user.username": "Kit Huckvale",
        "user.domain": "SURFACEBOOK",
        "user.domainUsername": "SURFACEBOOK/Kit Huckvale",
        "user.upn": "Kit Huckvale@SURFACEBOOK",
        "user.machine": "SURFACEBOOK",
        "machine.name": "SURFACEBOOK",
        "generate.shortId": "(Reserved)",
        "generate.uuid": "(Reserved)",
        "k8s.backend": "(Reserved)",
        "k8s.pod": "(Reserved)",
        "user.cidr": "(Reserved)",
        "user.ip": "(Reserved)",
        "user.name": "(Reserved)",
        "utc.date": "(Reserved)",
        "utc.hour": "(Reserved)",
        "utc.iso8601": "(Reserved)",
        "utc.minutes": "(Reserved)",
        "utc.month": "(Reserved)",
        "utc.seconds": "(Reserved)",
        "utc.timestamp": "(Reserved)",
        "utc.weekday": "(Reserved)",
        "utc.year": "(Reserved)",
        "cluster.arn": "arn:aws:eks:ap-southeast-2:446483188693:cluster/tronDev",
        "_localId": "{generate.shortId:5}",
        "correlationTag": "tron/correlationId",
        "correlationId": "ileALhYWS0W9HZLoG92ylw",
        "aws.region": "ap-southeast-2",
        "cluster.name": "tronDev",
        "nodeInstanceDecorator.iam.policy.name": "k8sNodeInstanceDecoratorPolicy",
        "nodeInstanceDecorator.iam.policy.trustPolicyPath": "C:\\Sandbox\\cloud\\k8s\\operators\\node-instance-decorator\\scripts\\_resources\\nodeInstanceDecorator-iam-role-trust-policy.json",
        "nodeInstanceDecorator.iam.serviceRole.nameSuffix": "k8sNodeInstanceDecoratorRole",
        "nodeInstanceDecorator.k8s.namespace": "tron",
        "nodeInstanceDecorator.k8s.serviceAccount.name": "node-instance-decorator",
        "serviceAccount.name": "{nodeInstanceDecorator.k8s.serviceAccount.name}",
        "serviceAccount.namespace": "{nodeInstanceDecorator.k8s.namespace}",
        "serviceAccount.iam.policy.name": "k8sNodeInstanceDecoratorPolicy",
        "serviceAccount.iam.policy.trustPolicyPath": "C:\\Sandbox\\cloud\\k8s\\operators\\node-instance-decorator\\scripts\\_resources\\nodeInstanceDecorator-iam-role-trust-policy.json",
        "serviceAccount.iam.serviceRole.nameSuffix": "{nodeInstanceDecorator.iam.serviceRole.nameSuffix}",
        "serviceAccount.iam.serviceRole.description": "Allows the K8s Node Instance Decorator operator to modify EC2 instances.",
        "serviceAccount.skipCreation": "true",
        "_script.fileTitle": "k8s-create-iam-service-account",
        "aws.accountId": "446483188693",
        "serviceAccount.iam.serviceRole.trustedEntitiesPolicyPath": "C:\\Sandbox\\cloud\\k8s\\operators\\node-instance-decorator\\scripts\\_history\\run-1655521938\\nodeInstanceDecorator-prepare-config\\k8sSA-{nodeInstanceDecorator.iam.policy.name}-mm84p\\iam-trust-policy.json",
        "serviceAccount.manifestPath": "C:\\Sandbox\\cloud\\k8s\\operators\\node-instance-decorator\\scripts\\_history\\run-1655521938\\nodeInstanceDecorator-prepare-config\\k8sSA-{nodeInstanceDecorator.iam.policy.name}-mm84p\\manifest.yaml",
        "serviceAccount.iam.policy.arns": "",
        "serviceAccount.iam.serviceRole.name": "tronDev-k8sNodeInstanceDecoratorRole",
        "serviceAccount.forceCreation": "",
        "serviceAccount.manifestTemplatePath": "{_script.directoryPath}\\_resources\\k8s-service-account.yaml-template",
        "serviceAccount.iam.serviceRole.trustedEntitiesPolicyTemplatePath": "{_script.directoryPath}\\_resources\\iam-role-trusted-entities.template",
        "serviceAccount.kustomize.patchTemplatePath": "{_script.directoryPath}\\_resources\\service-account-patch.yaml-template",
        "serviceAccount.kustomize.patchOutputPath": "{execution.currentDirectory}\\patch.yaml",
        "policy.name": "k8sNodeInstanceDecoratorPolicy",
        "policy.trustPolicyPath": "C:\\Sandbox\\cloud\\k8s\\operators\\node-instance-decorator\\scripts\\_resources\\nodeInstanceDecorator-iam-role-trust-policy.json"
      },
      "acceptParameterSubstitutionAdditions": true,
      "skipValidation": false
    }
  ],
  "muteSubtasks": false,
  "name": "Rollback for 'Prepare AWS IAM role and policy for node-instance-decorator' execution '1655521938'",
  "author": "(Automatically generated, Source script: Kit Huckvale)",
  "version": "(Source script: 0.1.0)",
  "parameters": {
    "execution.currentDirectory": "C:\\Sandbox\\cloud\\k8s\\operators\\node-instance-decorator\\scripts"
  },
  "acceptParameterSubstitutionAdditions": true,
  "skipValidation": false
}